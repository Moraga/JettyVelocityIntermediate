#set($render-stack = [])

#macro (render $render-component $render-data $render-alias)
    #set($null = $render-stack.add($data))
	
	## get default data
    #set($data = $object.clone($config.components[$render-component]))
	
	## merge call arguments
	#if ($render-data)
		$object.extend($data, $render-data)
	#end
	
	#set($render-component = $render-component.replace('/', '--'))
	

    #set($null = '#set($null = $!' + $render-component + ')')

    #evaluate($null)

    #if ($render-alias)
		
		#if ($render-alias == true)
			#set($content.components.render[$render-component] = $null)
		#else
			#set($content.component.render[$render-alias] = $null)
		#end
		
    #else
        $null
    #end

    #set($data = $render-stack.remove($math.sub($render-stack.size(), 1)))
#end